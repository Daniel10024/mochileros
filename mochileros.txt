/*   SCRIPT SQL  - Tablas con Restricciones -   */

CREATE TABLE USUARIO
       (
       ID_USUARIO BIGINT NOT NULL,                              
       NOMBRE CHAR(16) NOT NULL,                              
       APELLIDO CHAR(16) NOT NULL,                              
       FECHA_NAC DATETIME NOT NULL,                              
       PAIS CHAR(16) NOT NULL,                              
       DESCRIPCION VARCHAR(255) NOT NULL,                              
       CONTACTO VARCHAR(30) NOT NULL,                              
       PRIMARY KEY
               (
               ID_USUARIO
               )
       );



CREATE TABLE IDIOMAS
       (
       ID_IDIOMA BIGINT NOT NULL,                              
       IDIOMA BIGINT NOT NULL,                              
       PRIMARY KEY
               (
               ID_IDIOMA
               )
       );



CREATE TABLE ESCALA
       (
       ID_ESCALA BIGINT NOT NULL,                              
       ESCALA VARCHAR(60) NOT NULL,                              
       PRIMARY KEY
               (
               ID_ESCALA
               )
       );



CREATE TABLE INTERES
       (
       ID_INTERES BIGINT NOT NULL,                              
       DESCRIPCION VARCHAR(60) NOT NULL,                              
       PRIMARY KEY
               (
               ID_INTERES
               )
       );



CREATE TABLE VIAJE
       (
       ID_VIAJE BIGINT NOT NULL,                              
       ID_USUARIO BIGINT NOT NULL,                              
       ID_ESCALA BIGINT NULL,                              
       NOMBRE CHAR(60) NOT NULL,                              
       PRIMARY KEY
               (
               ID_VIAJE,
               ID_USUARIO
               ),
       FOREIGN KEY
               (
               ID_USUARIO
               )
          REFERENCES USUARIO
               (
               ID_USUARIO
               ),
       FOREIGN KEY
               (
               ID_ESCALA
               )
          REFERENCES ESCALA
               (
               ID_ESCALA
               )
       );



CREATE TABLE PUNTO
       (
       ID_PUNTO BIGINT NOT NULL,                              
       ID_VIAJE BIGINT NOT NULL,                              
       ID_USUARIO BIGINT NOT NULL,                              
       EJE_X BIGINT NOT NULL,                              
       EJE_Y BIGINT NOT NULL,                              
       FECHA_INICIO DATETIME NOT NULL,                              
       FECHA_FIN BIGINT NOT NULL,                              
       RADIO_EXTRA BIGINT NOT NULL,                              
       PRIMARY KEY
               (
               ID_PUNTO,
               ID_VIAJE,
               ID_USUARIO
               ),
       FOREIGN KEY
               (
               ID_VIAJE,
               ID_USUARIO
               )
          REFERENCES VIAJE
               (
               ID_VIAJE,
               ID_USUARIO
               )
       );



CREATE TABLE AMIGO
       (
       ID_USUARIO BIGINT NOT NULL,                              
       ID_USUARIO_1 BIGINT NOT NULL,                              
       ESTADO TINYINT NOT NULL,                              
       PRIMARY KEY
               (
               ID_USUARIO,
               ID_USUARIO_1
               ),
       FOREIGN KEY
               (
               ID_USUARIO
               )
          REFERENCES USUARIO
               (
               ID_USUARIO
               ),
       FOREIGN KEY
               (
               ID_USUARIO_1
               )
          REFERENCES USUARIO
               (
               ID_USUARIO
               )
       );



CREATE TABLE HABLA
       (
       ID_IDIOMA BIGINT NOT NULL,                              
       ID_USUARIO BIGINT NOT NULL,                              
       PRIMARY KEY
               (
               ID_IDIOMA,
               ID_USUARIO
               ),
       FOREIGN KEY
               (
               ID_IDIOMA
               )
          REFERENCES IDIOMAS
               (
               ID_IDIOMA
               ),
       FOREIGN KEY
               (
               ID_USUARIO
               )
          REFERENCES USUARIO
               (
               ID_USUARIO
               )
       );



CREATE TABLE LE_INTERESA
       (
       ID_PUNTO BIGINT NOT NULL,                              
       ID_VIAJE BIGINT NOT NULL,                              
       ID_USUARIO BIGINT NOT NULL,                              
       ID_INTERES BIGINT NOT NULL,                              
       PRIMARY KEY
               (
               ID_PUNTO,
               ID_VIAJE,
               ID_USUARIO,
               ID_INTERES
               ),
       FOREIGN KEY
               (
               ID_PUNTO,
               ID_VIAJE,
               ID_USUARIO
               )
          REFERENCES PUNTO
               (
               ID_PUNTO,
               ID_VIAJE,
               ID_USUARIO
               ),
       FOREIGN KEY
               (
               ID_INTERES
               )
          REFERENCES INTERES
               (
               ID_INTERES
               )
       );




